var SettingsDialog=function(t,e){(e=void 0===e?{}:e).closeButtonEnabled=!0,e.additionalHeaderClasses=void 0===e.additionalHeaderClasses?[]:e.additionalHeaderClasses,e.additionalHeaderClasses.push("leftIcon"),Dialog.call(this,t,e)};SettingsDialog.prototype=Object.create(Dialog.prototype),SettingsDialog.prototype.constructor=SettingsDialog,function(t){var e={},n={},i=null,r=null,a=function(t){return function(n){r!==n.target&&(i.menu.hide(),i.content.hide(),r.removeAttribute("class"),i=e[t],r=n.target,i.menu.show(),i.content.show(),r.setAttribute("class","selected"))}},o=function(t){return function(e){i.content!==t&&(i.content.hide(),i.menuItem.removeAttribute("class"),i.content=t,i.menuItem=e.target,i.content.show(),i.menuItem.setAttribute("class","selected"))}};SettingsDialog.prototype.setup=function(t,e,i){Dialog.prototype.setup.apply(this,arguments);for(var r=n.paymentHistory.children[0].children[0],a=r.children[0].nextElementSibling;a;){var o=a.nextElementSibling;r.removeChild(a),a=o}e.addPaymentHistoryRows(r)};SettingsDialog.prototype.initialize=function(d){Dialog.prototype.initialize.apply(this,arguments),$("table").each(function(){for(var t=$(this).find("tr"),e=0,n=t.length;e<n;++e)e%2!=0&&t[e].setAttribute("class","odd")}),d.children[0].appendChild(d.children[1].children[0]),function(){for(var e=t.getElementById("settingsContent"),i=0,r=e.children.length;i<r;++i){var a=e.children[i];n[a.getAttribute("settingGroup")]=a}}(),function(){for(var i=t.getElementById("settingsLeftMenu"),r=0,a=i.children.length;r<a;++r){var d=i.children[r],l={};l.menu=$(d);for(var c=0;c<d.children.length;++c){var s=d.children[c],u=$(n[s.getAttribute("settingGroup")]);0===c&&(s.setAttribute("class","selected"),l.menuItem=s,l.content=u),LPPlatform.addEventListener(s,"click",o(u))}e[d.getAttribute("settingGroup")]=l}}(),function(t){for(var n=t.children[0].children[1],o=0,d=n.children.length;o<d;++o){var l=n.children[o],c=l.getAttribute("settingGroup");0===o&&((i=e[c]).menu.show(),i.content.show(),(r=l).setAttribute("class","selected")),LPPlatform.addEventListener(l,"click",a(c))}}(d)},SettingsDialog.prototype.initializeDataBindings=function(e){for(var n=t.getElementById("settingsContent"),i=0,r=n.children.length;i<r;++i){var a=$(n.children[i]),o=a.attr("settingGroup"),d=a.find("["+this.DIALOG_FIELD+"]"),l=new DialogInput.NestedFields;this._inputFields[o]=l;for(var c=0;c<d.length;++c){var s=d[c];l[s.getAttribute(this.DIALOG_FIELD)]=new DialogInput.Input(s)}}}}(document);var PaymentHistory=function(t){this.data=t};PaymentHistory.prototype.template=function(){var t=[];for(var e in this.data){var n=this.data[e],i=document.createElement("tr"),r=document.createElement("td");r.textContent=n.timecreated,i.appendChild(r),(r=document.createElement("td")).textContent=n.product,i.appendChild(r),(r=document.createElement("td")).textContent=n.paymentprovider,i.appendChild(r),(r=document.createElement("td")).textContent=n.orderid,i.appendChild(r),(r=document.createElement("td")).textContent=n.unitcost,i.appendChild(r),(r=document.createElement("td")).textContent=n.quantity,i.appendChild(r),(r=document.createElement("td")).textContent=n.duration,i.appendChild(r),(r=document.createElement("td")).textContent="$"+n.unitcost*n.quantity+" "+n.currency,i.appendChild(r),(r=document.createElement("td")).textContent="Refund",i.appendChild(r),t.push(i)}return t};var AccountSettings=function(t){this.data=t,void 0!==this.data.paymentHistory&&(this.data.paymentHistory=new PaymentHistory(this.data.paymentHistory))};AccountSettings.prototype.getFormData=function(){var t={};for(var e in this.data){var n=this.data[e],i={};for(var r in n){var a=n[r];i[r]=null!==a&&"object"==typeof a?a.value:a}t[e]=i}return t};var appendChildren=function(t,e){for(var n=0,i=e.length;n<i;++n)t.appendChild(e[n])};AccountSettings.prototype.addPaymentHistoryRows=function(t){var e=document.createElement("tbody");appendChildren(e,this.data.paymentHistory.template()),appendChildren(t,e.children)},AccountSettingsService=function(t){var e=LPProxy.getBaseURL()+"getAccountSettings.php";return{call:function(n,i){t.ajax({url:e,success:function(t){var e=new AccountSettings(JSON.parse(t));n(e)},error:i})}}}($);
//# sourceMappingURL=sourcemaps/settingsDialog.js.map
